---
import { Image } from 'astro:assets';
import ProjectsMarquee from '../components/ProjectsMarquee';
import VerticalMarquee from '../components/VerticalMarquee';
import * as i18n from '../i18n/utils';

import project1 from '../assets/images/projects/legal-law-office/line-law.png';
import project2 from '../assets/images/projects/legal-law-office/ECP.png';
import project3 from '../assets/images/projects/KaseCap/KaseCab-image-carousel.png';
import project4 from '../assets/images/projects/Stanzza/Stanzza-carousel-image.png';

const projects = [
  { id: 1, image: project1.src, imageObj: project1, alt: 'LINEA LAW' },
  { id: 2, image: project2.src, imageObj: project2, alt: 'ECP' },
  { id: 3, image: project3.src, imageObj: project3, alt: 'KaseCab' },
  { id: 4, image: project4.src, imageObj: project4, alt: 'Stanzza' },
];
const column1 = [projects[0], projects[1]];
const column2 = [projects[2], projects[3]];
const lang = i18n.getLangFromUrl(Astro.url);
const t = i18n.useTranslations(lang);
const translatePath = i18n.useTranslatedPath(lang);
---

<section class="bg-[#13243c] py-4 md:py-6 lg:py-4 overflow-hidden">
  {/* Mobile Version - Horizontal Marquees */}
  <div class="lg:hidden">
    <div class="max-w-4xl mx-auto px-6 text-center mb-6">
      <h2 class="[font-family:'Bricolage_Grotesque',Helvetica] font-bold text-white text-3xl md:text-4xl mb-4 whitespace-pre-line">
        {t('serious.title')}
      </h2>

      <p class="[font-family:'Be_Vietnam',Helvetica] font-normal text-white/90 text-base md:text-lg leading-relaxed mb-6 max-w-xl mx-auto">
        {t('serious.text')}
      </p>
      <a 
        href={translatePath('/proyectos')}
        class="inline-block [font-family:'Be_Vietnam',Helvetica] font-semibold text-[#13243c] bg-white text-base md:text-lg rounded-full px-12 py-3 hover:bg-gray-100 transition-all duration-300"
      >
        {t('serious.cta')}
      </a>
    </div>

    {/* Row 1 - Scroll Left to Right */}
    <div class="mb-4">
      <ProjectsMarquee client:load projects={projects} direction="left" />
    </div>

    {/* Row 2 - Scroll Right to Left */}
    <div>
      <ProjectsMarquee client:load projects={projects} direction="right" />
    </div>
  </div>

  <div class="hidden lg:block">
    <div class="grid grid-cols-12 gap-0">
      
      <div class="col-span-5 px-8 xl:px-12 py-6 flex flex-col justify-center">
        <h2 class="[font-family:'Bricolage_Grotesque',Helvetica] font-bold text-white text-4xl xl:text-5xl mb-4 leading-tight whitespace-pre-line">
          {t('serious.title')}
        </h2>

        <p class="[font-family:'Be_Vietnam',Helvetica] font-normal text-white/90 text-lg leading-relaxed mb-6">
          {t('serious.text')}
        </p>
        <a 
          href={translatePath('/proyectos')}
          class="inline-block [font-family:'Be_Vietnam',Helvetica] font-semibold text-[#13243c] bg-white text-lg rounded-full px-12 py-3 hover:bg-gray-100 transition-all duration-300 w-fit"
        >
          {t('serious.cta')}
        </a>
      </div>

      <div class="col-span-7">
        <div class="grid grid-cols-2 gap-4 h-full">
          {/* Column 1 - Scroll Up */}
          <VerticalMarquee client:load projects={column1} direction="up" />
          
          <VerticalMarquee client:load projects={column2} direction="down" />
        </div>
      </div>

    </div>
  </div>

</section>

<style is:global>
  /* Horizontal Marquee (Mobile) */
  .marquee-container {
    overflow: hidden;
    position: relative;
    width: 100%;
    padding: 0.5rem 0;
  }

  .marquee-content {
    display: flex;
    width: fit-content;
    will-change: transform;
  }

  .marquee-item {
    padding: 0 0.5rem;
    flex-shrink: 0;
  }

  .marquee-left {
    animation: scroll-left 40s linear infinite;
  }

  .marquee-right {
    animation: scroll-right 40s linear infinite;
  }

  @keyframes scroll-left {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-33.333%);
    }
  }

  @keyframes scroll-right {
    0% {
      transform: translateX(-33.333%);
    }
    100% {
      transform: translateX(0);
    }
  }

  .marquee-content:hover {
    animation-play-state: paused;
  }

  .marquee-content {
    backface-visibility: hidden;
    perspective: 1000px;
  }

  /* Vertical Marquee (Desktop) */
  .vertical-marquee-container {
    overflow: hidden;
    position: relative;
    height: 600px;
    width: 100%;
  }

  .vertical-marquee-content {
    display: flex;
    flex-direction: column;
    height: fit-content;
    will-change: transform;
  }

  .vertical-marquee-item {
    padding: 0.5rem 0;
    flex-shrink: 0;
  }

  .vertical-marquee-up {
    animation: scroll-up 30s linear infinite;
  }

  .vertical-marquee-down {
    animation: scroll-down 30s linear infinite;
  }

  @keyframes scroll-up {
    0% {
      transform: translateY(0);
    }
    100% {
      transform: translateY(-50%);
    }
  }

  @keyframes scroll-down {
    0% {
      transform: translateY(-50%);
    }
    100% {
      transform: translateY(0);
    }
  }
  .vertical-marquee-content:hover {
    animation-play-state: paused;
  }
  .vertical-marquee-content {
    backface-visibility: hidden;
    perspective: 1000px;
  }
</style>
